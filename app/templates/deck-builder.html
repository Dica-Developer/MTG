<div class="row">
  <div class="large-12 column">
    <label for="deckName">Deck name:
      <input id="deckName" type="text" ng-model="deck.options.name">
    </label>
  </div>
  <div class="large-12 column">
    Cards in deck: {{deck.getCardCount()}}
    <span class="right">
      <span class="label label-info clickable" ng-class="{'success': typeFilter === type}" ng-repeat="(type, count) in deck.getCountByCardType()" style="margin: 0 1px;" ng-click="filterByType(type)">
        <img ng-repeat="typeIcon in type.split('-')" ng-src="http://mtgimage.com/symbol/other/{{typeIcon}}.svg"
             style="height: 12px !important"/> {{type}}: {{count}}
      </span>
    </span>
  </div>
</div>

<div class="row">
  <div class="large-12 column">
    <tabset>
      <tab heading="Cards">
        <table class="large-12">
          <thead>
          <tr>
            <th ng-click="orderPredicate = 'setCode'; orderReverse=!orderReverse" class="clickable">
              Set <i ng-if="orderPredicate === 'setCode'" class="right" ng-class="{'fi-arrow-down': !orderReverse, 'fi-arrow-up': orderReverse}"></i>
            </th>
            <th ng-click="orderPredicate = 'name'; orderReverse=!orderReverse" class="clickable">
              Name <i ng-if="orderPredicate === 'name'" class="right" ng-class="{'fi-arrow-down': !orderReverse, 'fi-arrow-up': orderReverse}"></i>
            </th>
            <th ng-click="orderPredicate = 'types'; orderReverse=!orderReverse" class="clickable">
              Type <i ng-if="orderPredicate === 'types'" class="right" ng-class="{'fi-arrow-down': !orderReverse, 'fi-arrow-up': orderReverse}"></i>
            </th>
            <th ng-click="orderPredicate = 'cmc'; orderReverse=!orderReverse" class="clickable">
              Mana Cost <i ng-if="orderPredicate === 'cmc'" class="right" ng-class="{'fi-arrow-down': !orderReverse, 'fi-arrow-up': orderReverse}"></i>
            </th>
            <th>In Deck</th>
            <th>I own</th>
            <th>Add/Drop</th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="card in cards | orderBy:orderPredicate:orderReverse | cardTypeFilter:typeFilter" ng-click="showCardModal(card)" class="clickable">
              <td>
                <set-symbol x-card="card" x-size="24" x-show-tip="true" x-tip-text="{{card.setName}}"
                            x-tip-appearance="right"></set-symbol>
              </td>
              <td>
                {{card.name}}
              </td>
              <td>
                {{card.type}}
              </td>
              <td>
                <mana-cost x-mana-cost="{{card.manaCost}}" x-size="16"></mana-cost>
                <span ng-if="card.cmc > 0" class="label secondary right">{{card.cmc}}</span>
              </td>
              <td>
                <span class="label success">{{deck.getCountOf(card.multiverseid)}}</span>
              </td>
              <td>
                <own-card-count x-card-id="{{card.multiverseid}}"></own-card-count>
              </td>
              <td>
                <ul class="button-group">
                  <li>
                    <button class="button tiny" ng-click="addCard($event,card.multiverseid)" style="margin: 0;">Add</button>
                  </li>
                  <li>
                    <button class="button tiny" ng-click="dropCard($event, card.multiverseid)" style="margin: 0;">Drop</button>
                  </li>
                  <li>
                    <button class="button tiny" ng-click="dropAll($event, card.multiverseid)" style="margin: 0;">Drop All</button>
                  </li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </tab>
      <tab heading="Sideboard">
        <div class="row">
          <div class="large-12 column">
            <table class="large-12">
              <thead>
              <tr>
                <th>Set</th>
                <th>Name</th>
                <th>Type</th>
                <th>Mana Cost</th>
                <th>In Deck</th>
                <th>Add</th>
              </tr>
              </thead>
              <tbody>
              <tr ng-repeat="sbCard in sideboard | cardTypeFilter:typeFilter" ng-click="showCardModal(sbCard)" class="clickable">
                <td>
                  <set-symbol x-card="sbCard" x-size="24" x-show-tip="true"
                              x-tip-text="{{cardToAdd.setName}}"></set-symbol>
                </td>
                <td>
                  {{sbCard.name}}
                </td>
                <td>
                  {{sbCard.type}}
                </td>
                <td>
                  <mana-cost x-mana-cost="{{sbCard.manaCost}}" x-size="16"></mana-cost>
                  <span ng-if="sbCard.cmc > 0" class="label secondary right">{{sbCard.cmc}}</span>
                </td>
                <td>
                  <span ng-if="deck.getCountOf(sbCard.multiverseid) > 0" class="label success">{{deck.getCountOf(sbCard.multiverseid)}}</span>
                </td>
                <td>
                  <button class="button tiny" ng-click="moveCardToMain($event, sbCard.multiverseid)" style="margin: 0;">Main Deck</button>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </tab>
      <tab heading="Add Card">
        <div class="panel-heading">
          <div class="row">
            <div class="large-10 columns">
              <label for="cardSearch">Search card:
                <input type="search" id="cardSearch" ng-model="scope.currentSearch"/>
              </label>
            </div>
            <div class="large-2 columns">
              <label for="resultLength">Results:
                <input type="number" id="resultLength" min="0" ng-model="scope.searchResultLimit"/>
              </label>
            </div>
          </div>
        </div>
        <table class="large-12">
          <thead>
          <tr>
            <th>Set</th>
            <th>Name</th>
            <th>Type</th>
            <th>Mana Cost</th>
            <th>In Deck</th>
            <th>Add</th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat="cardToAdd in cardsToAdd track by $index" ng-click="showCardModal(cardToAdd)" class="clickable">
            <td>
              <set-symbol x-card="cardToAdd" x-size="24" x-show-tip="true"
                          x-tip-text="{{cardToAdd.setName}}"></set-symbol>
            </td>
            <td>
              {{cardToAdd.name}}
            </td>
            <td>
              {{cardToAdd.type}}
            </td>
            <td>
              <mana-cost x-mana-cost="{{cardToAdd.manaCost}}" x-size="16"></mana-cost>
              <span ng-if="cardToAdd.cmc > 0" class="label secondary right">{{cardToAdd.cmc}}</span>
            </td>
            <td>
              <span ng-if="deck.getCountOf(cardToAdd.multiverseid) > 0" class="label success">{{deck.getCountOf(cardToAdd.multiverseid)}}</span>
            </td>
            <td>
              <button class="button tiny" ng-click="addCard($event, cardToAdd.multiverseid)" style="margin: 0;">Add</button>
            </td>
          </tr>
          </tbody>
        </table>
      </tab>
      <tab heading="Sample hand">
        <div class="row">
          <div class="large-12 column">
            <button class="button tiny" ng-click="shuffle()">Shuffle</button>
          </div>
        </div>
        <div class="row">
          <div class="large-12 column">
            <ul class="large-block-grid-3">
              <li ng-repeat="sampleCard in sampleHand track by $index">
                <img ng-src="http://mtgimage.com/set/{{sampleCard.setCode}}/{{sampleCard.name}}.jpg"
                     alt="{{sampleCard.name}}" width="150">
              </li>
            </ul>
          </div>
        </div>
      </tab>
    </tabset>
  </div>
</div>
<div class="row">
  <div class="col-xs-12">
    <button class="btn btn-default" ng-click="saveDeck()">Save</button>
  </div>
</div>

